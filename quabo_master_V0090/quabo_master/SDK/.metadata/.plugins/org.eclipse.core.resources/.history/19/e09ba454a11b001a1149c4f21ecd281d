#include "xparameters.h"
#include "xgpio.h"
#include "gpio_spi_sel.h"

#define GPIO_SPI_SEL_BASEADDR XPAR_AXI_SPI_SEL_BASEADDR
#define GPIO_OUT_CHAN 1
XGpio Gpio;

int init_gpio_spi_sel()
{
	//set up gpio
	int Status;
	Status = XGpio_Initialize(&Gpio, XPAR_GPIO_DEVICE_ID);
	if (Status != 0)  return 1;
	//default output is high, so we select wr by default
	XGpio_SetDataDirection(&Gpio, GPIO_OUT_CHAN, 0x1);
	XGpio_DiscreteWrite(&Gpio, GPIO_OUT_CHAN, 0x1);
	return 0;
}

void gpio_sel_wr()
{
	//XGpio_SetDataDirection(&Gpio, GPIO_OUT_CHAN, 0x1);
	XGpio_DiscreteWrite(&Gpio, GPIO_OUT_CHAN, 0x1);
}

void gpio_sel_mb()
{
	XGpio_DiscreteWrite(&Gpio, GPIO_OUT_CHAN, 0x0);
}
